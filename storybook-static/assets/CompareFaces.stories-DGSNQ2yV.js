import{j as e}from"./jsx-runtime-D_zvdyIk.js";import{r as s}from"./index-DmM0KDA7.js";import{W as N,a as K,A as O}from"./useAxios-Cfhxm_Qp.js";import{D as W}from"./global-BfAsUHpc.js";const g=()=>{const[m,E]=s.useState(null),[d,A]=s.useState(null),[f,h]=s.useState(null),[b,j]=s.useState(null),[L,r]=s.useState(!1),[p,y]=s.useState(null),[P,i]=s.useState(!1),[u,R]=s.useState(null),[C,S]=s.useState(null),x=s.useRef(null),T=async()=>{var a,n;r(!0),i(!0);try{if(d&&m){r(!0),R([f??"",b??""]);const t=new FormData;console.log(m,d),t.append("image1",m),t.append("image2",d);const o=await K.post("/persons/compare",t,{headers:{"x-api-key":"ykru2gKctIAmpLETxx0buQ","x-group-id":"d2ea1214-22fd-4512-9844-577bdab9ccd5"}});r(!1),y(o.data),i(!0)}}catch(t){const o=t;O&&S((n=(a=o==null?void 0:o.response)==null?void 0:a.data)==null?void 0:n.detail),r(!1)}},B=s.useCallback(()=>{var a;h(null),j(null),y(null),r(!1),S(null),(a=x.current)==null||a.close_camera()},[]);return e.jsxs("div",{className:"mt-3 w-full rounded-md bg-white p-4 relative",children:[e.jsx("h1",{className:"font-bold text-4xl",children:"Compare Faces "}),e.jsxs("ul",{className:"mt-3 list-inside list-disc text-gray-500 mb-10",children:[e.jsxs("li",{children:[" ","Kindly click on the ",e.jsx("strong",{children:"Compare Faces"})," button to open the camera module."]}),e.jsx("li",{children:" Please make sure you allow the browser to access your camera."}),e.jsxs("li",{children:[" ","Select a picture for your gallery as the control image, and take a real time photo of yourself to compare both images"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-5",children:[e.jsx("div",{className:"flex-grow basis-[320px] rounded-md bg-gray-100 ",children:e.jsx(N,{setImageFile:E,setImageSrc:j,imageSrc:b,ref:x,backgroundStyle:"bg-gray-100"})}),e.jsx("div",{className:"relative flex-grow basis-[320px] rounded-md border border-gray-300",children:e.jsx(N,{setImageFile:A,setImageSrc:h,imageSrc:f,ref:x})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{className:"py-3 mt-5 text-white bg-[#4327B2] border-[#4327B2] border-[1px] px-5 rounded-md cursor-pointer",onClick:T,children:"Compare Faces"})}),P&&e.jsx(W,{closeDialog:()=>{i(!1),B()},children:e.jsxs("div",{className:"flex flex-col justify-center",children:[e.jsx("div",{className:"flex space-x-3",children:u==null?void 0:u.map((a,n)=>e.jsx("div",{className:"relative h-fit w-1/2 rounded-md bg-white shadow-md mb-3",children:e.jsx("img",{src:a,alt:"Selected Image",style:{objectFit:"scale-down"},className:"selected-image rounded-md"})},n))}),L&&e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("div",{className:"border-t-[#4327B2] h-16 w-16 animate-spin rounded-full border-4 border-t-4 border-gray-200"}),e.jsx("h4",{className:"mt-3 text-xl font-bold",children:"Comparing Images"})]}),C!==null&&e.jsx("div",{className:"text-center",children:e.jsx("h5",{className:"",children:C})}),p&&e.jsxs("div",{className:"mt-5 text-center",children:[e.jsx("p",{className:"text-lg font-semibold text-gray-600",children:"Confidence Percentage"}),e.jsxs("h2",{className:"font-bold",children:[(p.similarity_score*100).toFixed(2),"%"]}),e.jsx("p",{className:"text-gray-500",children:p.message}),e.jsx("button",{onClick:()=>{i(!1)},className:"mt-5",children:"Compare Again"})]})]})})]})};g.__docgenInfo={description:"",methods:[],displayName:"CompareFaces"};const H={title:"ReactComponentLibrary/compareFaces",component:g},_=()=>e.jsx(g,{}),l=_.bind({});l.args={title:"Default theme",theme:"primary",testIdPrefix:"compare"};const c=_.bind({});c.args={title:"Secondary theme",theme:"secondary",testIdPrefix:"compare"};var F,w,I;l.parameters={...l.parameters,docs:{...(F=l.parameters)==null?void 0:F.docs,source:{originalSource:"() => <CompareFaces />",...(I=(w=l.parameters)==null?void 0:w.docs)==null?void 0:I.source}}};var v,k,D;c.parameters={...c.parameters,docs:{...(v=c.parameters)==null?void 0:v.docs,source:{originalSource:"() => <CompareFaces />",...(D=(k=c.parameters)==null?void 0:k.docs)==null?void 0:D.source}}};const J=["CompareTest","CompareSecondary"];export{c as CompareSecondary,l as CompareTest,J as __namedExportsOrder,H as default};
