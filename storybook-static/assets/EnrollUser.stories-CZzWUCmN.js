import{j as e}from"./jsx-runtime-D_zvdyIk.js";import{r as s}from"./index-DmM0KDA7.js";import{W as P,a as B}from"./useAxios-Cfhxm_Qp.js";import{D as L}from"./global-BfAsUHpc.js";const m=({authInstance:u})=>{const d=s.useRef(null),p=s.useRef(null),[f,C]=s.useState(""),[l,x]=s.useState(null),[h,U]=s.useState(null),[i,t]=s.useState(!1),[I,g]=s.useState(!1),[D,b]=s.useState(!1),[R,n]=s.useState(!1),T=async()=>{t(!0),n(!0);try{if(h){t(!0);const r=h,c=new FormData;c.append("person_name",f);const j=u.getGroupId();j&&c.append("group_id",j),c.append("image",r);const k=await B.post("/persons/create-with-image",c,{headers:u.getHeaders()});t(!1),g(!0),n(!0)}}catch(r){console.error(r),t(!1),b(!0),n(!0)}},F=s.useCallback(()=>{var r;x(null),g(!1),t(!1),b(!1),(r=p.current)==null||r.close_camera()},[]);return s.useEffect(()=>{d.current&&d.current.focus()},[]),e.jsxs("div",{className:"mx-auto mt-10 w-fit rounded-md bg-white p-5 relative",children:[e.jsxs("div",{className:"mb-3 border-b border-gray-300 py-3 text-gray-700",children:[e.jsx("h4",{className:"font-bold",children:"Create a new user"}),e.jsx("p",{className:"text-sm",children:"Users created would be validated during authentication."})]}),e.jsxs("div",{className:"my-4 flex  flex-col gap-2",children:[e.jsx("label",{className:"text-sm font-semibold",htmlFor:"Name",children:"Name"}),e.jsx("input",{type:"text",placeholder:"Enter Your Customer's Name",className:"rounded border p-2",ref:d,value:f,onChange:r=>C(r.target.value)})]}),e.jsx(P,{setImageFile:U,setImageSrc:x,imageSrc:l,ref:p}),l&&e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{className:"mt-5 py-3 text-white bg-[#4327B2] border-[#4327B2] border-[1px] px-5 rounded-md cursor-pointer",onClick:T,children:"Upload Photo"})}),R&&e.jsxs(L,{closeDialog:()=>{n(!1),F()},children:[e.jsx("div",{className:"flex justify-center",children:l&&e.jsx("div",{className:"relative h-fit w-2/3 rounded-md bg-white shadow-md mb-3",children:e.jsx("img",{src:l,alt:"Selected Image",style:{objectFit:"scale-down"},className:"rounded-md"})})}),i&&e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("div",{className:"border-t-[#4327B2] h-16 w-16 animate-spin rounded-full border-4 border-t-4 border-gray-200"}),e.jsx("h4",{className:"mt-3 text-xl font-bold",children:"Uploading Image"})]}),I&&!i&&e.jsx("div",{className:"flex flex-col items-center justify-center",children:e.jsx("h4",{className:"mt-3 text-xl font-bold",children:"Person added successfully"})}),D&&!i&&e.jsx("div",{className:"flex flex-col items-center justify-center",children:e.jsx("h4",{className:"mt-3 text-xl font-bold",children:"Unable To Add Person"})})]})]})};m.__docgenInfo={description:"",methods:[],displayName:"EnrollUser",props:{authInstance:{required:!0,tsType:{name:"TaniAuth"},description:""}}};const G={title:"ReactComponentLibrary/enrolluser",component:m},_=()=>e.jsx(m,{}),a=_.bind({});a.args={title:"Default theme",theme:"primary",testIdPrefix:"enroll"};const o=_.bind({});o.args={title:"Secondary theme",theme:"secondary",testIdPrefix:"enroll"};var N,y,E;a.parameters={...a.parameters,docs:{...(N=a.parameters)==null?void 0:N.docs,source:{originalSource:"() => <EnrollUser />",...(E=(y=a.parameters)==null?void 0:y.docs)==null?void 0:E.source}}};var v,w,S;o.parameters={...o.parameters,docs:{...(v=o.parameters)==null?void 0:v.docs,source:{originalSource:"() => <EnrollUser />",...(S=(w=o.parameters)==null?void 0:w.docs)==null?void 0:S.source}}};const H=["EnrollTest","EnrollSecondary"];export{o as EnrollSecondary,a as EnrollTest,H as __namedExportsOrder,G as default};
